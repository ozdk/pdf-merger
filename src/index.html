<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Security headers -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self'; img-src 'self' data:; worker-src 'self' blob:; child-src blob:">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta name="referrer" content="no-referrer">
    
    <title>PDF Merger | Secure Document Merging</title>
    <meta name="description" content="Securely merge multiple PDF files into one document without uploading them to any server">
    
    <link rel="stylesheet" href="css/styles.css">
    <link rel="icon" href="images/favicon.svg" type="image/svg+xml">
</head>
<body>
    <header>
        <h1>PDF Merger</h1>
        <p class="tagline">Securely merge your PDF files in your browser</p>
    </header>

    <main class="container">
        <!-- Upload section -->
        <section class="upload-section">
            <h2 class="section-title">Upload Files</h2>
            
            <div class="drop-zone" id="drop-zone" role="button" aria-label="Upload PDF files">
                <div class="drop-zone-prompt">
                    <svg class="upload-icon" xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="17 8 12 3 7 8"></polyline>
                        <line x1="12" y1="3" x2="12" y2="15"></line>
                    </svg>
                    <p>Drag & drop PDF files here<br>or</p>
                    <label for="file-input" class="file-input-label">Choose Files</label>
                    <input type="file" id="file-input" multiple accept="application/pdf" class="file-input-hidden">
                </div>
            </div>

            <div class="file-list-container">
                <h3>Selected Files</h3>
                <ul id="file-list" class="file-list" aria-live="polite"></ul>
            </div>

            <div class="actions">
                <button id="clear-files" class="btn btn-secondary" type="button">Clear All</button>
                <button id="merge-button" class="btn btn-primary" type="button" disabled>Merge PDFs</button>
            </div>
        </section>

        <!-- Results section -->
        <section id="results-section" class="results-section hidden">
            <div class="results-container">
                <h2>Your PDF is Ready!</h2>
                <div class="pdf-preview" id="pdf-preview" role="region" aria-label="PDF preview"></div>
                <div class="download-info">
                    <p id="file-info">File size: <span id="file-size">--</span></p>
                    <a id="download-link" class="btn btn-success" download="merged.pdf">Download Merged PDF</a>
                    <button id="start-over" class="btn btn-secondary" type="button">Start Over</button>
                </div>
            </div>
        </section>
        
        <!-- How it works section -->
        <section class="how-it-works">
            <h2>How It Works</h2>
            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <h3>Upload Files</h3>
                    <p>Select multiple PDF files or drag and drop them into the upload area</p>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <h3>Merge PDFs</h3>
                    <p>Click the "Merge PDFs" button to combine all files into one document</p>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <h3>Download Result</h3>
                    <p>Preview and download your merged PDF file</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Loading overlay -->
    <div id="loading-overlay" class="loading-overlay hidden" role="alertdialog" aria-busy="true" aria-label="Processing">
        <div class="spinner" aria-hidden="true"></div>
        <p>Merging your PDFs...</p>
    </div>

    <footer>
        <div class="footer-content">
            <p class="security-note"><strong>ðŸ”’ Secure Processing:</strong> Your files are processed entirely in your browser. Nothing is uploaded to any server.</p>
            <p class="copyright">&copy; 2025 PDF Merger | <a href="#privacy-policy" id="privacy-link">Privacy Policy</a></p>
        </div>
    </footer>

    <!-- Privacy modal -->
    <div id="privacy-modal" class="modal hidden" role="dialog" aria-labelledby="privacy-title" aria-hidden="true">
        <div class="modal-content">
            <span class="close-modal" aria-label="Close">&times;</span>
            <h2 id="privacy-title">Privacy Policy</h2>
            <p>This PDF Merger tool processes all files directly in your web browser. We do not upload, store, or transmit your files to any server. All processing happens locally on your device.</p>
            <p>We collect no personal data, do not use cookies, and do not track your usage of this tool.</p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="lib/pdf-lib.min.js"></script>
    <script src="lib/pdf.js"></script>
    <script src="js/fileUtils.js"></script>
    <script src="js/pdfMerger.js"></script>
    <script src="js/app.js"></script>
</body>
</html>